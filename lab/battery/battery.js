var data = [ [ 2.81, 5.62 ],
  [ 7.14, 8 ],
  [ 2.72, 5.44 ],
  [ 3.87, 7.74 ],
  [ 1.9, 3.8 ],
  [ 7.82, 8 ],
  [ 7.02, 8 ],
  [ 5.5, 8 ],
  [ 9.15, 8 ],
  [ 4.87, 8 ],
  [ 8.08, 8 ],
  [ 5.58, 8 ],
  [ 9.13, 8 ],
  [ 0.14, 0.28 ],
  [ 2, 4 ],
  [ 5.47, 8 ],
  [ 0.8, 1.6 ],
  [ 4.37, 8 ],
  [ 5.31, 8 ],
  [ 0, 0 ],
  [ 1.78, 3.56 ],
  [ 3.45, 6.9 ],
  [ 6.13, 8 ],
  [ 3.53, 7.06 ],
  [ 4.61, 8 ],
  [ 1.76, 3.52 ],
  [ 6.39, 8 ],
  [ 0.02, 0.04 ],
  [ 9.69, 8 ],
  [ 5.33, 8 ],
  [ 6.37, 8 ],
  [ 5.55, 8 ],
  [ 7.8, 8 ],
  [ 2.06, 4.12 ],
  [ 7.79, 8 ],
  [ 2.24, 4.48 ],
  [ 9.71, 8 ],
  [ 1.11, 2.22 ],
  [ 8.38, 8 ],
  [ 2.33, 4.66 ],
  [ 1.83, 3.66 ],
  [ 5.94, 8 ],
  [ 9.2, 8 ],
  [ 1.14, 2.28 ],
  [ 4.15, 8 ],
  [ 8.43, 8 ],
  [ 5.68, 8 ],
  [ 8.21, 8 ],
  [ 1.75, 3.5 ],
  [ 2.16, 4.32 ],
  [ 4.93, 8 ],
  [ 5.75, 8 ],
  [ 1.26, 2.52 ],
  [ 3.97, 7.94 ],
  [ 4.39, 8 ],
  [ 7.53, 8 ],
  [ 1.98, 3.96 ],
  [ 1.66, 3.32 ],
  [ 2.04, 4.08 ],
  [ 11.72, 8 ],
  [ 4.64, 8 ],
  [ 4.71, 8 ],
  [ 3.77, 7.54 ],
  [ 9.33, 8 ],
  [ 1.83, 3.66 ],
  [ 2.15, 4.3 ],
  [ 1.58, 3.16 ],
  [ 9.29, 8 ],
  [ 1.27, 2.54 ],
  [ 8.49, 8 ],
  [ 5.39, 8 ],
  [ 3.47, 6.94 ],
  [ 6.48, 8 ],
  [ 4.11, 8 ],
  [ 1.85, 3.7 ],
  [ 8.79, 8 ],
  [ 0.13, 0.26 ],
  [ 1.44, 2.88 ],
  [ 5.96, 8 ],
  [ 3.42, 6.84 ],
  [ 1.89, 3.78 ],
  [ 1.98, 3.96 ],
  [ 5.26, 8 ],
  [ 0.39, 0.78 ],
  [ 6.05, 8 ],
  [ 1.99, 3.98 ],
  [ 1.58, 3.16 ],
  [ 3.99, 7.98 ],
  [ 4.35, 8 ],
  [ 6.71, 8 ],
  [ 2.58, 5.16 ],
  [ 7.37, 8 ],
  [ 5.77, 8 ],
  [ 3.97, 7.94 ],
  [ 3.65, 7.3 ],
  [ 4.38, 8 ],
  [ 8.06, 8 ],
  [ 8.05, 8 ],
  [ 1.1, 2.2 ],
  [ 6.65, 8 ] ];

var battery = {
  solve: function () {
    var cols = data.map(function (d) {
      return {
        x: d[0],
        y: d[1],
        xy: d[0] * d[1],
        x2: d[0] * d[0],
        y2: d[1] * d[1]
      };
    });

    var sums = cols.reduce(function (sum, d) {
      sum.x += d.x;
      sum.y += d.y;
      sum.xy += d.xy;
      sum.x2 += d.x2;
      sum.y2 += d.y2;
      return sum;
    }, { x: 0, y: 0, xy: 0, x2: 0, y2: 0 });

    var n = cols.length;
    var a = ((sums.y * sums.x2) - (sums.x * sums.xy)) / ((n * sums.x2) - (sums.x * sums.x));
    var b = ((n * sums.xy) - (sums.x * sums.y)) / ((n * sums.x2) - (sums.x * sums.x));
    console.log(a);
    console.log(b);
    return function (x) {
      return a + b * x;
    }
  },

  solve2: function () {
    var ratios = data.map(function (c) {
      if (c[0] === 0) return 0;
      return c[1] / c[0];
    });

    var total = ratios.reduce(function (sum, val) {
      return sum + val;
    });

    var avg = total / ratios.length;
    console.log(avg);
  }
};

var func = battery.solve2();